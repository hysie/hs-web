/*! For license information please see main.d7f3c526.chunk.js.LICENSE.txt */
(this["webpackJsonp@hypersigil/editor"]=this["webpackJsonp@hypersigil/editor"]||[]).push([[0],{122:function(e,t,n){var a=n(36),r=n(37),i=n(123),o=n(125),s=n(80),c=n(40),l=n(126),u=i.createLanguage({Name:function(e){return i.regexp(/([A-Za-z_][A-Za-z0-9_]*)/).node("Name")},Number:function(e){return i.regexp(/[+-]?([0-9]*[.])?[0-9]+/).node("Number")},Index:function(e){return i.seq(i.string("[").node("IO"),o.within("[",e.Text,"]"),i.string("]").node("IC")).node("Index")},Block:function(e){return i.seq(i.string("{").node("BO"),o.within("{",i.all.node("All"),"}"),i.string("}").node("BC")).node("Block")},CallSymbol:function(e){return i.string("$").node("CallSymbol")},CallName:function(e){return i.seq(e.Name,i.alt(i.string(".").then(e.Name),e.Index).many().node("SubnameList")).node("CallName")},Call:function(e){return i.seq(e.CallSymbol,e.CallName,i.optWhitespace.then(e.Block).many().node("CallList")).node("Call")},String:function(e){return i.alt(i.takeWhile((function(e){return"$"!==e})).assert((function(e){return e.length>0})),i.string("$"),i.all.assert((function(e){return e.length>0}))).node("String")},Text:function(e){return i.alt(e.SetExpression,e.Call,e.String).many().node("Text")},Operator:function(e){return i.alt(i.string("&&"),i.string("||"),i.string("!!"),i.string("AND"),i.string("OR"),i.string("XOR"),i.string(">>"),i.string("<<"),i.string("<-"),i.string("->"),i.string("+="),i.string("-="),i.string("*="),i.string("/="),i.string("=="),i.string(">="),i.string("<="),i.string("!="),i.string(">"),i.string("<"),i.string("="),i.string("+"),i.string("-"),i.string("*"),i.string("/"),i.string("^")).node("Operator")},Operand:function(e){return i.alt(e.Call,e.Number,e.Block).trim(i.optWhitespace).node("Operand")},Expression:function(e){return i.seq(e.Operand,i.seq(e.Operator,e.Operand).node("Operation").many().node("OperationList")).node("Expression")},SetExpression:function(e){return i.seq(e.CallSymbol,e.CallName,i.alt(i.string("="),i.string("+="),i.string("-=")).trim(i.optWhitespace).node("SetOperator"),e.Operand).node("SetExpression")}}),d=function(){"use strict";function e(){a(this,e),this.parseText=c.memoize((function(e){return u.Text.parse(e)})),this.parseCallName=c.memoize((function(e){return u.CallName.parse(e)})),this.parseExpression=c.memoize((function(e){return u.Expression.parse(e)}))}return r(e,[{key:"parse",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Text;if(!1===(t=n===u.Text?this.parseText(e):n===u.CallName?this.parseCallName(e):n===u.Expression?this.parseExpression(e):n.parse(e)).status)throw SyntaxError("on ".concat(t.index,", expected ").concat(t.expected));return new s(t.value)}},{key:"tokenize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var a=this.parse(e);return n&&a.traverse((function(e,n){if("All"===n.name){var r={name:"AllX",value:t.tokenize(n.value,!0),start:{offset:0,line:1,column:1},end:{offset:n.end.offset-n.start.offset,line:n.end.line-n.start.line+1,column:n.end.column-n.start.column+1}};a.replace(e,r)}})),a.flatten()}catch(r){throw console.log(JSON.stringify(e)),r}}},{key:"parseFile",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=o.normalizePath(e),r=(t=t.replace(/(?:\r\n|\r|\n)/g,"\n")).match(/^[--]-+\n/g);return r||(t="---\npassage:\n    name: default\n    fakefront: true\n---\n"+t),t=t.slice(r?r[0].length:3),c.chunk(t.split(/[--]-+\n/g),2).map((function(e){var t=l.parse(e[0]);if(!t||void 0===t.passage){if(!n)throw new Error("Yaml failed to parse on ".concat(e[0]));t={passage:{name:""}}}return{name:a+"."+t.passage.name,front:e[0],text:e[1],yaml:t}}))}}]),e}();e.exports={HyperSigil:u,Parser:d}},125:function(e,t,n){var a=n(50),r=n(123),i=n(80),o=n(40),s=new Map;function c(e,t){s.length>128&&s.clear(),s.has(e)||s.set(e,function(e){for(var t=new Array(e.length),n=new Array(e.length),a=1,r=1,i=0;i<=e.length;i++){t[i]=a,n[i]=r;var o=i>0&&"\r"===e[i-1]&&"\n"===e[i],s="\r"===e[i],c="\n"===e[i];!s&&!c||o||(a++,r=0),r++}return[t,n]}(e));var n=s.get(e);return{offset:t,line:n[0][t],column:n[1][t]}}e.exports={getIndex:c,within:function(e,t,n){return r((function(a,o){for(var s=1,l=o;l<a.length;l++)if(a.charAt(l)===e&&s++,a.charAt(l)===n&&s--,s<=0){var u=a.substr(o,l-o),d=t.parse(u);return new i(d.value).offset=c(a,o),d.status?r.makeSuccess(l,d.value):r.makeFailure(o,d.value)}return r.makeFailure(o,"is not well paranthesized!")}))},normalizePath:function(e){var t;return(e=function(e,t){if("string"!==typeof e)throw new TypeError("expected path to be a string");if("\\"===e||"/"===e)return"/";var n=e.length;if(n<=1)return e;var a="";if(n>4&&"\\"===e[3]){var r=e[2];"?"!==r&&"."!==r||"\\\\"!==e.slice(0,2)||(e=e.slice(2),a="//")}var i=e.split(/[/\\]+/);return!1!==t&&""===i[i.length-1]&&i.pop(),a+i.join("/")}(e,t).replace(/^([a-zA-Z]+:|\.\/)/,"")).endsWith(".utf8")&&(e=e.slice(0,-5)),e.endsWith(".txt")&&(e=e.slice(0,-4)),e.startsWith(".")&&(e=e.slice(1)),e.startsWith("/")&&(e=e.slice(1)),e.replace("/",".")},encodeUnicode:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))},decodeUnicode:function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},trimByBackslash:function(e){var t=(e=e.replace(/(?:\r\n|\r|\n)/g,"\n")).split("\n").map((function(e){var t=e.trimLeft();t.startsWith("\\")&&!t.startsWith("\\\\\\")&&(e=t);var n=e.trimRight();return n.endsWith("\\")&&!n.endsWith("\\\\\\")&&(e=n),e}));t[t.length-1]+="\\";var n,r="",i=a(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.startsWith("\\\\\\")||o.endsWith("\\\\\\"),c=o.startsWith("\\")&&r.endsWith("\n")&&!s,l=o.endsWith("\\")&&!s;"\\"===o||(c&&l?r=r.slice(0,-1)+o.slice(1,-1).replace("\\",""):c?r=r.slice(0,-1)+o.slice(1).replace("\\","")+"\n":r+=l?o.slice(0,-1).replace("\\",""):o.replace("\\","")+"\n")}}catch(u){i.e(u)}finally{i.f()}return r.replace("\\\\\\","\\")},escape:function(e){return o.escape(e).replace(/#/g,"&num;").replace(/\*/g,"&ast;").replace(/\\/g,"&bsol;").replace(/~/g,"&tilde;")},unescape:function(e){return o.unescape(e).replace(/&num;/g,"#").replace(/&ast;/g,"*").replace(/&bsol;/g,"\\").replace(/&tilde;/g,"~")}}},187:function(e,t,n){e.exports=n(271)},194:function(e,t,n){},226:function(module,exports,__webpack_require__){var util=__webpack_require__(81),lodash=__webpack_require__(40),_require=__webpack_require__(122),HyperSigil=_require.HyperSigil;function ev(e){return document.engine.evaluate(e)}function clean(e){return e.replace(/(?:\r\n|\r|\n)/g,"").trim()}function trimIndeent(e){var t=e.split("\n");if(0===t.length)return e;var n=t[0].search(/\S/);return-1===n?trimIndeent(t.slice(1).join("\n")):t.map((function(e){var t=e.search(/\S/);return n<=t?e.slice(n):e.trimLeft()})).join("\n")}module.exports={raw:function(e){return util.escape(e.replace("\\","\\\\\\"))},comment:function(e){},new:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=document.engine.env).new.apply(t,[e].concat(a))},if:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(void 0===e||void 0===t)throw new Error("If requieres a conition and action");if(""===e)return ev(t);var a=module.exports.HyperSigil.Lang.evalConditional(e);return ev(a?t:n)},function:function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];document.engine.env.local.push({args:n});for(var r=e,i=1;i<=n.length;i++)r=r.replace("$"+i,n[i-1]);return r=ev(r),document.engine.env.local.pop(),r}},HyperSigil:{Standard:{true:!0,false:!1,hide:function(e){ev(e)},goto:function(e){void 0!==e&&""!==e||(e=document.engine.currentPassageName),document.engine.goToPassage(e.trim())},refresh:function(){document.engine.goToPassage(".")},math:function(e){return module.exports.HyperSigil.Lang.evalMath(e)},js:function js(text){return eval(text)},include:function(e){document.engine.env.local.push();var t=ev(document.engine.passages[document.engine.resolvePassageName(e)].text);return document.engine.env.local.pop(),t},eval:function(e){return lodash.unescape(ev(ev(e)))},html:function(e){return lodash.unescape(ev(e))},rand:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===(t=t.map((function(e){return ev(e)}))).length?Math.random():1===t.length?Math.round(Math.random()*parseFloat(t[0])):2===t.length?Math.round(Math.random()*(parseFloat(t[1])-parseFloat(t[0]))+parseFloat(t[0])):void 0},Random:{choice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return ev(e)}))[Math.floor(Math.random()*t.length)]}},json:function(e){return JSON.parse(ev(e))},array:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return ev(e)}))},alert:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){alert(ev(e))})),exists:function(e){return document.engine.env.has(e)}},Components:{link:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";void 0!==e&&""!==e||(e=document.engine.currentPassageName),e=e.trim();var a=module.exports.HyperSigil.Lang.encode(n);return"<a href=# onclick=\"{          document.engine.evaluate(            document.engine.env.static.getState().HyperSigil.Lang.decode('".concat(a,"')          );          document.engine.goToPassage('").concat(e,"')        }\">").concat(ev(t),"</a>")},replace_link:function(e,t){var n=document.engine.addCallback((function(){document.getElementById(n).innerHTML=ev(t)}));return'<span id="'.concat(n,"\"><a href='#' onclick=\"document.engine.DOMCallbacks['").concat(n,"']()\">").concat(ev(e),"</a></span>")},exhaust_menu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1;document.engine.env.local.push({item:function(e,t){var a=["game","passages",document.engine.resolvePassageName(e),"seen"],r=document.engine.addCallback((function(){document.engine.env.set(a,!0),document.engine.goToPassage(e)}));return!!document.engine.env.has(a)&&document.engine.env.get(a)?"":(n=!0,'<a href="#" onclick="{document.engine.DOMCallbacks[\''.concat(r,"']()}\">").concat(ev(t),"</a>\n"))}});var a=ev(clean(e));return document.engine.env.local.pop(),"<div>".concat(n?a:ev(t),"</div>")},img:function(e,t){var n=module.exports.HyperSigil.Lang.encode(t);return"<a href=# onclick=\"{          document.engine.evaluate(            document.engine.env.HyperSigil.Lang.decode('".concat(n,'\')          );        }"><img src="').concat(e,'"></a>')},title:function(e){return"<h1>".concat(e,"</h1>")},list:function(e){document.engine.env.local.push({item:function(e){return"<li>".concat(ev(e),"</li>")}});var t=ev(clean(e));return document.engine.env.local.pop(),"<ul>".concat(t,"</ul>")},textbox:function(e,t){var n=document.engine.addCallback((function(e){var a=document.getElementById(n);ev(t.replace(/\$1/g,a.value))}));return'<input type="text" class="textbox" id="'.concat(n,'"          value="').concat(ev(e),'"          onchange="document.engine.DOMCallbacks[\'').concat(n,"']()\"        />")},dialog:function(e,t){var n=""!==e?"<span class='dialog name'>".concat(ev(e),"</span>"):"";return"".concat(n,"<div class='dialog'>").concat(ev(t),"</div>\\")},error:function(e){return'<span style="          display:inline-block;          padding:1px;          color: #D8000C;          background-color: #FFD2D2;          border: 2px solid red;          border-radius: 3px;          font-size: small;        ">'.concat(e,"</span>")}},Documentation:{external_link:function(e,t){return'<a href="'.concat(e,'" target="_blank" style="color: black">').concat(t,"</a>")},codespan:function(e){return'<span class="code">'.concat(e,"</span>")},code:function(e){return'<div class="code">'.concat(trimIndeent(e),"</div>")},continue:function(e){return"<div style=\"text-align:right;margin:50px\"><a href='#' onclick=\"{document.engine.goToPassage('".concat(e.trim(),"')}\"> > Continue</a></div>")}},Lang:{encode:function(e){return util.encodeUnicode(e)},decode:function(e){return util.decodeUnicode(e)},ast:function(e){return document.engine.parser.parse(e).toDot()},evalConditional:function(e){var t=document.engine.parser.parse(e,HyperSigil.Expression);return document.engine.evaluateNode(t).map((function(t){var n={"==":function(e,t){return e.toString()===t.toString()},"!=":function(e,t){return e.toString()!==t.toString()},">=":function(e,t){return Number(e)>=Number(t)},"<=":function(e,t){return Number(e)<=Number(t)},">":function(e,t){return Number(e)>Number(t)},"<":function(e,t){return Number(e)<Number(t)},null:function(e,t){return e}};if(t.op in n)return n[t.op](t.a,t.b);throw SyntaxError("Operation ".concat(t.op," is not defined for conditional expression ").concat(e))})).every((function(e){return!0===e}))},evalMath:function(e){var t=document.engine.parser.parse(e,HyperSigil.Expression),n=document.engine.evaluateNode(t);return n.reduce((function(t,n){var a={"+":function(e){return Number(t)+Number(e)},"-":function(e){return Number(t)-Number(e)},"*":function(e){return Number(t)*Number(e)},"/":function(e){return Number(t)/Number(e)}};if(n.op in a)return a[n.op](n.b).toString();throw SyntaxError("Operation ".concat(n.op," is not defined for conditional expression ").concat(e))}),n[0].a)}}}}},227:function(e,t,n){var a=n(127),r=n(56),i=n(37),o=n(36),s=n(228),c=n(229),l=n(233),u=n(235).createStore,d=n(237).produce,f=n(130).default,m=n(130),h=m.ActionCreators,p=m.excludeAction,v=n(40),g=n(81),y=function(e){"use strict";s(n,e);var t=c(n);function n(e){var a;return o(this,n),(a=t.call(this,"Variable ".concat(e.join(".")," not found"))).name="VariableNotFoundError",a}return n}(l(ReferenceError)),b=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this._internal=t}return i(e,[{key:"get",value:function(e,t){var n=v.get(this._internal,e,t);if(void 0===n)throw new y(e);return n}},{key:"set",value:function(e,t){v.set(this._internal,e,t)}},{key:"has",value:function(e){return v.has(this._internal,e)}},{key:"clear",value:function(){this._internal={}}},{key:"getState",value:function(){return this._internal}}]),e}(),E=function(e){"use strict";s(n,e);var t=c(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,n),t.call(this,[e])}return i(n,[{key:"get",value:function(e,t){for(var n=this._internal.length;n>=0;n--)if(v.has(this._internal[n],e))return v.get(this._internal[n],e,t);throw new y(e)}},{key:"set",value:function(e,t){for(var n=this._internal.length;n>=0;n--)if(v.has(this._internal[n],e))return v.set(this._internal[n],e,t);v.set(this._internal[this._internal.length-1],e,t)}},{key:"has",value:function(e){for(var t=this._internal.length;t>=0;t--)if(v.has(this._internal[t],e))return!0;return!1}},{key:"push",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._internal.push(e)}},{key:"pop",value:function(){return this._internal.pop()}},{key:"clear",value:function(){this._internal=[{}]}}]),n}(b),x=function(e){"use strict";s(n,e);var t=c(n);function n(){var e;return o(this,n),(e=t.call(this)).baseReducer=function(e,t){switch(t.type){case"CLEAR":return{};case"FLUSH":return d(e,(function(e){v.mergeWith(e,t.value,(function(e,t){if(void 0!==t.__serial__)return{__serial__:t.__serial__,__attr__:t.toJSON()}}))}));case"LOAD":return r({passage:{},game:{passages:{}}},t.value);case"PASSAGE":return d(e,(function(e){e.game.passages[e.passage.name]=e.passage,e.passage=e.game.passages[t.value]}));default:return{}}},e.reducer=f(e.baseReducer,{limit:100,ignoreInitialState:!0,filter:p(["FLUSH","LOAD"])}),e._cache={},e._internal=u(e.reducer,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),e._classes={},e}return i(n,[{key:"get",value:function(e,t){var n=this;if(v.has(this._cache,e))return v.get(this._cache,e,t);if(v.has(this._internal.getState().present,e))return this.push(e);var a=e.slice(0,v.range(1,e.length+1).map((function(t){return e.slice(0,t)})).map((function(e){return v.has(n._internal.getState().present,e)})).indexOf(!1)),r=v.get(this._internal.getState().present,a);if(void 0!==r&&void 0!==r.__serial__){if(this.push(a),v.has(this._cache,e))return v.get(this._cache,e,t);throw new y(e)}throw new y(e)}},{key:"set",value:function(e,t){if(void 0===t)throw Error("Setting ".concat(e.join(".")," to undefined"));v.set(this._cache,e,t)}},{key:"has",value:function(e){return v.has(this._cache,e)||v.has(this._internal.getState().present,e)}},{key:"clear",value:function(){this._cache={},this._internal.dispatch({type:"CLEAR"}),this._internal.dispatch(h.clearHistory())}},{key:"flush",value:function(){this._internal.dispatch({type:"FLUSH",value:this._cache}),this._cache={}}},{key:"push",value:function(e,t){var n=this;return void 0===t&&(t=v.get(this._internal.getState().present,e)),t=v.cloneDeepWith(t,(function(e){if("object"===typeof e&&void 0!==e.__serial__&&void 0!==e.__attr__){var t=n._classes[e.__serial__].fromJSON(e.__attr__);return void 0===t.__serial__&&(t.__serial__=e.__serial__),g.bind(t),t}})),v.set(this._cache,e,t),t}},{key:"dispatch",value:function(e){return this._internal.dispatch(e)}},{key:"getState",value:function(){return this._internal.getState().present}}]),n}(b),_=function(e){"use strict";s(n,e);var t=c(n);function n(e){var a;return o(this,n),(a=t.call(this,e))._internal=Object.freeze(a._internal),a}return i(n,[{key:"set",value:function(e,t){throw new TypeError("Variable ".concat(e.join(".")," is static, can not be set"))}},{key:"clear",value:function(){}}]),n}(b),k=function(){"use strict";function e(t){o(this,e),this._env={local:new E,global:new x,static:new _(t)}}return i(e,[{key:"has",value:function(e){var t=this._env;return!!t.local.has(e)||(!!t.global.has(e)||!!t.static.has(e))}},{key:"get",value:function(e){var t=this._env,n=[e[0]];if(t.local.has(n))return t.local.get(e);if(t.global.has(n))return t.global.get(e);if(t.static.has(n))return t.static.get(e);throw new y(e)}},{key:"set",value:function(e,t){var n=this._env,a=[e[0]];n.local.has(a)?n.local.set(e,t):n.global.has(a)?n.global.set(e,t):n.static.has(a)?n.static.set(e,t):n.local.set(e,t)}},{key:"next",value:function(e,t){(this._env.global.has(["passage","name"])&&this._env.global.get(["passage","name"])!==e||t)&&(this._env.local.clear(),this._env.global.flush(),this._env.global.dispatch({type:"PASSAGE",value:e}))}},{key:"undo",value:function(){this._env.local.clear(),this._env.global.flush(),this._env.global.dispatch(h.undo())}},{key:"redo",value:function(){this._env.local.clear(),this._env.global.flush(),this._env.global.dispatch(h.redo())}},{key:"restart",value:function(){this._env.local.clear(),this._env.global.clear()}},{key:"load",value:function(e){this._env.local.clear(),this._env.global.clear(),this._env.global.dispatch({type:"LOAD",value:e})}},{key:"register",value:function(e,t){if(void 0===t&&(t=e.name),!e.fromJSON||!e.prototype.toJSON)throw new Error("Class ".concat(t," is not serializable"));this._env.global._classes[t]=e}},{key:"new",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=a(this._env.global._classes[e],n);return void 0===i.__serial__&&(i.__serial__=e),g.bind(i),i}},{key:"local",get:function(){return this._env.local}},{key:"global",get:function(){return this._env.global}},{key:"static",get:function(){return this._env.static}}]),e}();e.exports=k},240:function(e,t,n){var a=n(79),r=[[/\r\n/g,"\n"],[/\n(#+)(.*)/g,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=t.length;return"<h".concat(a,">").concat(n.trim(),"</h").concat(a,">")}],[/!\[([^\[]*)\]\((?:javascript:)?([^\)]+)\)/g,"<img src='$2' alt='$1'>"],[/\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,"<a href='$2'>$1</a>"],[/(\*\*)([\s\S]*?)\1/g,"<strong>$2</strong>"],[/(\*)([\s\S]*?)\1/g,"<em>$2</em>"],[/\~\~([\s\S]*?)\~\~/g,"<del>$1</del>"],[/\:\"(.*?)\"\:/g,"<q>$1</q>"],[/\n\s*```\n([^]*?)\n\s*```\s*\n/g,"\n<pre>$1</pre>"],[/\n(&gt;|\>)(.*)/g,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"\n<blockquote>".concat(n.trim(),"</blockquote>")}],[/<\/blockquote>\n<blockquote>/g,"\n"],[/https?:\/\/[^"']*/g,function(e){return e.replace(/<\/?em>/g,"_")}]];e.exports={render:function(e){return e="\n".concat(e,"\n"),r.forEach((function(t){var n=a(t,2),r=n[0],i=n[1];e=e.replace(r,i)})),0===(t=e).length?t:"\n"===t[0]&&"\n"===t[t.length-1]?t.slice(1,-1):"\n"===t[0]?t.slice(1):"\n"===t[t.length-1]?t.slice(0,-1):t;var t}}},241:function(e,t,n){var a=n(36),r=n(37),i=function(){"use strict";function e(){a(this,e)}return r(e,[{key:"toJSON",value:function(){for(var e={},t=0,n=Object.keys(this);t<n.length;t++){var a=n[t];e[a]=this[a]}return e}}],[{key:"fillFromJSON",value:function(e,t){for(var n=new t,a=0,r=Object.keys(e);a<r.length;a++){var i=r[a];n[i]=e[i]}return n}}]),e}();e.exports=i},242:function(e,t,n){var a=n(36),r=n(37),i=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;a(this,e),this.body=t,this.element=document.createElement("div"),this.body.appendChild(this.element),this.render=this.render.bind(this)}return r(e,[{key:"render",value:function(e){var t=this,n=this.element;n.classList.toggle("fadeout"),setTimeout((function(){t.element=document.createElement("div"),t.body.replaceChild(t.element,n),t.element.classList.toggle("passage"),t.element.innerHTML=e.html,t.body.appendChild(t.element),setTimeout((function(){return t.element.classList.toggle("fadein")}),20)}),300)}}]),e}();e.exports=i},243:function(e,t,n){var a=n(50),r=n(36),i=n(37),o=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;r(this,e),this.body=t,this.element=document.createElement("header"),this.body.appendChild(this.element),this.render=this.render.bind(this)}return i(e,[{key:"createButton",value:function(e,t,n){var a=document.createElement("li"),r=document.createElement("a");return r.innerHTML=e,n?r.setAttribute("onclick",t):r.classList.toggle("link-disabled"),a.appendChild(r),a}},{key:"createMenu",value:function(e){var t,n=this,r=document.createElement("ul"),i=e.map((function(e){return n.createButton(e[0],e[1],e[2])})),o=a(i);try{for(o.s();!(t=o.n()).done;){var s=t.value;r.appendChild(s)}}catch(c){o.e(c)}finally{o.f()}return r}},{key:"render",value:function(e){var t=document.createElement("nav"),n=this.createMenu([["RESTART","document.engine.restart()",!0],["<< PREV","document.engine.undo()",document.engine.canUndo],["NEXT >>","document.engine.redo()",document.engine.canRedo]]);t.appendChild(n);var a=this.element;this.element=document.createElement("header"),this.element.appendChild(t),this.body.replaceChild(this.element,a)}}]),e}();e.exports=o},269:function(e,t,n){},270:function(e,t,n){},271:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(21),o=n.n(i),s=n(147),c=n(4),l=n(46),u=n(53),d=n(5),f=n(148),m=(n(194),n(43)),h=n(71),p=n(72),v=n.n(p);function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function y(e){return"string"!==typeof e||""===e?"Untitled":e.split("\\").pop().split("/").pop()}function b(e){return"string"===typeof e?e.split("+").map((function(e){return"mod"===e&&(window.navigator.platform.indexOf("Win")>-1||window.navigator.platform.indexOf("Linux")>-1)&&(e="ctrl"),"mod"===e&&window.navigator.platform.indexOf("Mac")>-1&&(e="command"),e.slice(0,1).toUpperCase()+e.slice(1)})).join("+"):"object"===typeof e?b(e.sequence):void 0}var E=n(27),x=n(9),_=n(7),k=new v.a,O=_.Toaster.create(),N=k,S=navigator.userAgent.toLowerCase().indexOf(" electron/")>-1;function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";window.api.send("toMain",{uuid:g(),title:e,from:n,content:t})}S&&(window.api.receive("fromMain",(function(e){e.uuid,e.from;var t=e.title,n=e.content;switch(t){case"set-path":D.dispatch({type:"SET_PATH",path:n});break;case"set-text":var a,r=Object(x.a)(n.texts);try{var i=function(){var e=Object(c.a)(a.value,2),t=e[0],n=e[1],r=D.getState().tabs.passive.findIndex((function(e){return e.path===t}));r>=0?D.dispatch({type:"SWITCH_TAB",key:D.getState().tabs.passive[r].key,content:n}):D.dispatch({type:"ADD_TAB",path:t,text:n})};for(r.s();!(a=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}break;case"open-folder-dialog":k.emit("open-folder-dialog-reply",n.from,n.path);break;case"error":O.show({message:"Error: "+n,intent:_.Intent.DANGER});break;case"version":D.dispatch({type:"SET_VERSION",version:n.version});break;default:throw new Error("Invalid title on message from main process")}})),k.on("open-document",(function(){w("open-document")})),k.on("save-document",(function(e,t){D.dispatch({type:"CONTENT_TOGGLE_MODIFIED",modified:!1}),w("save-document",{path:e,text:t})})),k.on("save-document-as",(function(e,t){D.dispatch({type:"CONTENT_TOGGLE_MODIFIED",modified:!1}),w("save-document-as",{path:e,text:t})})),k.on("close-app",(function(){D.dispatch({type:"FLUSH"}),w("close-app")})),k.on("run-project",(function(e){return w("run-command",{path:e,command:P.getState().commands.run})})),k.on("build-project",(function(e){return w("run-command",{path:e,command:P.getState().commands.build})})),k.on("open-folder-dialog",(function(e){return w("open-folder-dialog",{from:e})})),k.on("new-project",(function(e,t){return w("new-project",{name:e,path:t})})),k.on("set-app-zoom",(function(e){return w("set-zoom",{factor:e})})),window.addEventListener("keyup",(function(e){e.ctrlKey&&e.altKey&&"i"===e.key&&window.api.send("toMain",{uuid:g(),title:"toggle-devtools",from:"",content:{}})}),!0)),S||k.on("save-document",(function(e,t){void 0===e?k.emit("show-rename",t):D.dispatch({type:"CONTENT_TOGGLE_MODIFIED",modified:!1})})),k.on("warning",(function(e){O.show({message:"Warning: "+e,intent:_.Intent.WARNING})})),k.on("error",(function(e){O.show({message:"Error: "+e,intent:_.Intent.DANGER})})),k.on("wip",(function(e){O.show({message:"WIP: Not implemented yet!",intent:_.Intent.WARNING,icon:"build"})})),document.clearPreferences=function(){P.dispatch({type:"CLEAR"})},document.clearSession=function(){D.dispatch({type:"CLEAR"})};var C=n(48),T=n.n(C),j=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Object(m.a)(this,e),this.emitter=new v.a,this._state=n,this._reducer=t,this.localStorageKey=a,this.dispatch.bind(this),this.getState.bind(this),this.localStorageKey){var r=JSON.parse(window.localStorage.getItem(this.localStorageKey));r&&(this._state=r)}}return Object(h.a)(e,[{key:"dispatch",value:function(e){this._state=this._reducer(this._state,e),this.localStorageKey&&window.localStorage.setItem(this.localStorageKey,JSON.stringify(this._state)),this.emitter.emit("set-state")}},{key:"getState",value:function(){return this._state}}]),e}();function A(){return{key:g(),path:void 0,text:"",modified:!1,dirty:!1}}var I={app:{version:void 0},tabs:S?{active:A(),passive:[]}:{active:{key:"1234",path:"main.utf8",text:"AAA",modified:!1,dirty:!1},passive:[{key:"1234",path:"main.utf8",text:"AAA",modified:!1,dirty:!1}]}},M={editor:{fontFamily:"Arial, Helvetica, sans-serif",fontSize:16},app:{zoom:1,saveSession:!1},commands:{run:"npm run start",build:"npm run build"}};var P=new j((function(e,t){switch(t.type){case"MERGE":return Object(E.a)(e,(function(e){T.a.merge(e,t.value)}));case"SET":return Object(E.a)(e,(function(e){T.a.set(e,t.key,t.value)}));case"CLEAR":return Object(E.a)(e,(function(e){return window.localStorage.clear(),M}));default:return e}}),M,"preferences"),D=new j((function(e,t){function n(e,t){e.tabs.active.dirty&&N.emit("get-text",(function(e){t.tabs.active.text=e,t.tabs.active.dirty=!1}))}function a(e,t){if(void 0!==e.tabs.active.path){var a=e.tabs.passive.findIndex((function(t){return t.key===e.tabs.active.key}));a>=0?(n(e,t),t.tabs.passive[a]=t.tabs.active):t.tabs.passive.push(e.tabs.active)}}switch(t.type){case"SET_VERSION":return Object(E.a)(e,(function(e){e.app.version=t.version}));case"SET_PATH":return Object(E.a)(e,(function(e){document.title=y(t.path)+" - HyperSigil",e.tabs.active.path=t.path}));case"FLUSH":return Object(E.a)(e,(function(t){n(e,t)}));case"CLEAR":return Object(E.a)(e,(function(e){return I}));case"CONTENT_TOGGLE_MODIFIED":return Object(E.a)(e,(function(n){var r=void 0===t.modified?!n.tabs.active.modified:t.modified;!0!==r||document.title.startsWith("*")||(document.title="*"+document.title),!1===r&&document.title.startsWith("*")&&(document.title=document.title.slice(1)),n.tabs.active.modified=r,r?n.tabs.active.dirty=!0:a(e,n)}));case"CONTENT_NEW":return Object(E.a)(e,(function(t){document.title.startsWith("*")&&(document.title=document.title.slice(1)),a(e,t),t.tabs.active=A()}));case"ADD_TAB":return Object(E.a)(e,(function(n){document.title.startsWith("*")&&(document.title=document.title.slice(1)),a(e,n),n.tabs.active={key:g(),path:t.path,text:t.text,modified:!1,dirty:!1},n.tabs.passive.push(n.tabs.active)}));case"REMOVE_TAB":return Object(E.a)(e,(function(n){if(e.tabs.active.key===t.key){var a=n.tabs.passive.findIndex((function(e){return e.key===t.key}));a+1<e.tabs.passive.length?n.tabs.active=e.tabs.passive[a+1]:n.tabs.active=a-1>=0?e.tabs.passive[a-1]:A()}n.tabs.passive=n.tabs.passive.filter((function(e){return e.key!==t.key}))}));case"SWITCH_TAB":return Object(E.a)(e,(function(n){a(e,n);var r=n.tabs.passive.findIndex((function(e){return e.key===t.key}));t.content&&(n.tabs.passive[r].text=t.content,n.tabs.passive[r].modified&&N.emit("warning","On file ".concat(n.tabs.passive[r].path," content has been overwritten.")),n.tabs.passive[r].key===n.tabs.active.key&&(n.tabs.passive[r].key=g()),n.tabs.passive[r].modified=!1),n.tabs.active=n.tabs.passive[r]}));default:return e}}),I,P.getState().app.saveSession?"session":"");N.emit("set-app-zoom",P.getState().app.zoom);var L=n(24);function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(a.useEffect)((function(){return N.on(e,t),function(){return N.off(e,t)}}),[e,t].concat(Object(L.a)(n)))}function R(e,t){var n=t?T.a.get(e.getState(),t):e.getState(),r=Object(a.useState)(n),i=Object(c.a)(r,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){var n=function(){if(t){var n=T.a.get(e.getState(),t);n!==o&&s(n)}else s(e.getState())};return e.emitter.on("set-state",n),function(){return N.off("set-state",n)}}),[e,t,o]),o}function H(){var e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),[n.width,n.height]}var F=n(73),G=n.n(F),W=new F.Parser;function U(e){return Object(a.useCallback)((function(t){var n=Object(c.a)(t,2),a=n[0],r=n[1];if(!d.g.isText(a))return[];if("HyperSigil"!==d.c.get({children:e},r.slice(0,-1)).type)return[];var i,o=[],s=["CallSymbol","Name","Operator","SetOperator","Number","IO","IC","BO","BC"],l=function(e){var t,n=[],a=Object(x.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if("string"===r.name.toLowerCase())for(var i=/((\n|^)[ ]*\\|\\[ ]*(\n|$))|(\n|^)(#+)|\*/g,o=void 0;null!=(o=i.exec(r.value));)n.push({name:"mark",value:o[0],start:{offset:r.start.offset+o.index,line:r.line,column:r.column+o.index},end:{offset:r.start.offset+o.index+o[0].length,line:r.line,column:r.column+o.index+o[0].length}});else n.push(r)}}catch(s){a.e(s)}finally{a.f()}return n}(W.tokenize(a.text,!0)),u=Object(x.a)(l);try{for(u.s();!(i=u.n()).done;){var f=i.value,m=s.includes(f.name),h=o.length>0&&o[o.length-1].focus.offset===f.start.offset;m&&h&&"expression"===o[o.length-1].name?o[o.length-1].focus.offset=f.end.offset:o.push({name:m?"expression":f.name,anchor:{path:r,offset:f.start.offset},focus:{path:r,offset:f.end.offset}})}}catch(p){u.e(p)}finally{u.f()}return o}),[W,e])}function q(e){var t=e.initialText,n=R(P,"editor"),i=Object(a.useState)(t),o=Object(c.a)(i,2),s=o[0],m=o[1],h=Object(a.useMemo)((function(){return function(e){var t=e.normalizeNode;return e.insertPassage=function(e){var t=e.selection?d.c.descendant(e,e.selection.anchor.path.slice(0,2)):void 0,n=void 0===t||void 0!==t&&"HyperSigil"!==t.type?{at:[e.selection.anchor.path[0]+1]}:{mode:"highest"};d.h.insertNodes(e,[{type:"Passage",children:[{type:"YAML",children:[{text:"passage:\n".concat(V(e,4),"name: ")}]},{type:"HyperSigil",children:[{text:"\n"}]}]}],Object(l.a)({},n)),d.h.select(e,[e.selection.anchor.path[0],0,0]),d.h.collapse(e,{edge:"focus"})},e.removePassage=function(t){if(t.selection){var n=[t.selection.anchor.path[0]];d.h.removeNodes(t,{at:n}),0===n[0]&&0===t.children.length&&d.h.insertNodes(e,[{type:"Passage",children:[{type:"HyperSigil",children:[{text:""}]}]}],{mode:"highest"})}},e.normalizeNode=function(n){var a=Object(c.a)(n,2),r=a[0],i=a[1];if(d.b.isElement(r)&&"Passage"===r.type)if(r.children.length>=2)for(var o=1;o<r.children.length;o++)r.children[o-1].type===r.children[o].type&&d.h.mergeNodes(e,{at:[i[0],o]});else r.children.length<2&&(0!==i[0]?1===r.children.length&&"YAML"===r.children[0].type?d.h.removeNodes(e,{at:i}):d.h.mergeNodes(e,{at:i}):"HyperSigil"!==r.children[0].type&&(d.h.delete(e,{at:[i[0],0,0]}),d.h.setNodes(e,{type:"HyperSigil"},{at:[i[0],0]})));0===e.children.length&&(console.log("NORMALIZATION (on empty editor): Inserting empty default passage"),d.h.insertNodes(e,[{type:"Passage",children:[{type:"HyperSigil",children:[{text:""}]}]}],{mode:"highest"})),t(n)},e}(Object(f.a)(Object(u.d)(Object(d.i)())))}),[]),p=Object(a.useCallback)((function(e){return r.a.createElement(z,e)})),v=function(e){return Object(a.useCallback)((function(t){switch(t.ctrlKey||t.metaKey||J.includes(t.keyCode)||D.dispatch({type:"CONTENT_TOGGLE_MODIFIED",modified:!0}),t.key){case"Tab":t.preventDefault(),e.insertText(V(e,4));break;case"Enter":t.preventDefault();var n=K(e).match(/^[--]-+/g);n?(d.h.delete(e,{distance:n[0].length,reverse:!0}),e.insertPassage(e)):e.insertText("\n");break;case"{":t.preventDefault(),e.insertText("{}"),d.h.move(e,{distance:1,unit:"offset",reverse:!0})}}),[e])}(h),g=U(s);B("get-text",(function(e){e(function(e){return e.map((function(e){var t,n=[],a=Object(x.a)(e.children);try{for(a.s();!(t=a.n()).done;){var r=t.value;"YAML"===r.type&&n.push("---\n"+r.children[0].text+"\n---"),"HyperSigil"===r.type&&n.push(r.children[0].text)}}catch(i){a.e(i)}finally{a.f()}return n.join("\n")})).join("\n")}(s))})),B("insert-passage",(function(){return h.insertPassage(h)})),B("remove-passage",(function(){return h.removePassage(h)}));var y=Object(a.useCallback)((function(e){var t=e.attributes,n=e.children;switch(e.element.type){case"YAML":return r.a.createElement("div",Object.assign({},t,{className:"yaml"}),r.a.createElement("hr",{contentEditable:!1,style:{userSelect:"none"}}),r.a.createElement("div",{className:"yaml-content"},n),r.a.createElement("hr",{contentEditable:!1,style:{userSelect:"none"}}));case"HyperSigil":return r.a.createElement("div",Object.assign({className:"hypersigil-content"},t),n);case"Passage":default:return r.a.createElement("div",t,n)}}));return r.a.createElement(u.c,{editor:h,value:s,onChange:function(e){return m(e)},spellcheck:"false"},r.a.createElement(u.a,{style:{fontFamily:n.fontFamily,fontSize:"".concat(n.fontSize,"px")},tabIndex:"1",autoFocus:!0,className:"slate-editable-hs mousetrap",decorate:g,renderElement:y,renderLeaf:p,placeholder:"Write your passage here...",onKeyDown:v,onSelect:function(e){if(window.chrome&&null!=h.selection)try{var t=u.b.toDOMPoint(h,h.selection.focus)[0];if(null==t)return;var n=t.parentElement;if(null==n)return;n.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(e){}}}))}function z(e){var t=e.attributes,n=e.children,a=e.leaf;return r.a.createElement("span",Object.assign({spellCheck:"expression"!==a.name,className:a.name},t),n)}function V(e,t){var n=K(e);return" ".repeat(t-n.length%t)}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n";if(!e.selection)return"";var n=d.c.descendant(e,e.selection.anchor.path),a=n.text.slice(0,e.selection.focus.offset),r=a.lastIndexOf(t);return a.slice(-1===r?0:r+t.length)}var J=[16,18,20,27,35,36,37,38,39,40,91,93,112,113,114,115,116,117,118,119,120,121,122,123,144,174,175];var $=n(145),X=n(149),Y=n(146),Z=function(e){Object(X.a)(n,e);var t=Object(Y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(h.a)(n,[{key:"componentDidCatch",value:function(e,t){N.emit("error",e.message)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.a.Component);function Q(){var e,t=H(),n=Object(c.a)(t,2)[1],a=R(D,"tabs.active");return r.a.createElement(Z,null,r.a.createElement($.Scrollbars,{style:{height:n-32}},r.a.createElement(q,{key:a.key,initialText:(e=a.text,W.parseFile("#",e,!0).map((function(e){return{type:"Passage",children:[].concat(Object(L.a)("#.default"===e.name&&e.yaml.passage.fakefront?[]:[{type:"YAML",children:[{text:e.front.slice(0,-1)}]}]),[{type:"HyperSigil",children:[{text:e.text}]}])}})))})))}function ee(e,t,n){return e.key===n&&(t=e.modified),t&&e.key===n?"selection":t&&e.key!==n?"dot":t||e.key!==n?"blank":"circle"}function te(e){var t=e.dataKey,n=e.text,a=e.icon;return r.a.createElement("tr",null,r.a.createElement("td",{className:"crossButton"},r.a.createElement(_.Button,{minimal:!0,icon:"small-cross",onClick:function(){return D.dispatch({type:"REMOVE_TAB",key:t})}})),r.a.createElement("td",null,r.a.createElement(_.Button,{minimal:!0,fill:!0,alignText:_.Alignment.LEFT,text:r.a.createElement("div",{className:"main-menu-filepath",style:{maxWidth:"200px",minWidth:"100px"}},n),onClick:function(){return D.dispatch({type:"SWITCH_TAB",key:t})},rightIcon:r.a.createElement(_.Icon,{icon:a||"blank",color:"#BFCCD6"})})))}function ne(){var e=R(D,"tabs.active"),t=R(D,"tabs.passive"),n=H(),a=Object(c.a)(n,1)[0];return r.a.createElement(_.Popover,{interactionKind:_.PopoverInteractionKind.HOVER,position:_.Position.BOTTOM,content:r.a.createElement(_.HTMLTable,{className:"tabs-filetable"},r.a.createElement("tbody",null,t.length>0?t.map((function(t){return r.a.createElement(te,{key:t.key,dataKey:t.key,text:y(t.path),icon:ee(e,t.modified,t.key)})})):r.a.createElement("div",{style:{padding:"20px"}},"Empty"))),target:r.a.createElement("div",{className:"".concat(_.Classes.MINIMAL," ").concat(_.Classes.BUTTON," main-menu-filepath"),style:{maxWidth:Math.min(400,a-220)}},(!0===e.modified?"*":"")+(void 0===e.path?"Untitled":e.path))})}n(269);var ae=n(76),re=n.n(ae);function ie(e){return Object(a.useEffect)((function(){for(var t=0,n=Object.keys(e.keyMap);t<n.length;t++){var a=n[t];a in e.handlers&&re.a.bind(e.keyMap[a].sequence,e.handlers[a])}return function(){for(var t=0,n=Object.keys(e.keyMap);t<n.length;t++){var a=n[t];a in e.handlers&&re.a.unbind(e.keyMap[a].sequence)}}})),null}re.a.prototype.stopCallback=function(e,t,n){return!1};var oe={NEW_DOCUMENT:{name:"Create a new document",sequence:"mod+n"},OPEN_DOCUMENT:{name:"Open an existing document",sequence:"mod+o"},SAVE_DOCUMENT:{name:"Save the document to a file",sequence:"mod+s"},SAVE_DOCUMENT_AS:{name:"Save the document to a new file",sequence:"mod+shift+s"},EXIT_APP:{name:"Close the application",sequence:"mod+shift+q"}};function se(){var e={NEW_DOCUMENT:t,OPEN_DOCUMENT:n,SAVE_DOCUMENT:a,SAVE_DOCUMENT_AS:i,EXIT_APP:function(){return N.emit("close-app")}};function t(){D.dispatch({type:"CONTENT_NEW"})}function n(){N.emit("open-document")}function a(e){S||void 0===e.key||e.preventDefault(),N.emit("get-text",(function(e){return N.emit("save-document",D.getState().tabs.active.path,e)}))}function i(){N.emit("get-text",(function(e){return N.emit("save-document-as",D.getState().tabs.active.path,e)}))}return r.a.createElement(_.ButtonGroup,{minimal:!0},r.a.createElement(_.Popover,{minimal:!0,position:_.Position.BOTTOM_LEFT,content:r.a.createElement(_.Menu,null,r.a.createElement(_.Menu.Item,{text:"New",label:b(oe.NEW_DOCUMENT),onClick:t}),r.a.createElement(_.Menu.Item,{text:"New Project...",onClick:function(){return N.emit("show-new-project")}}),r.a.createElement(_.Menu.Item,{text:"Open...",label:b(oe.OPEN_DOCUMENT),onClick:n,disabled:!S}),r.a.createElement(_.Menu.Item,{text:"Save",label:b(oe.SAVE_DOCUMENT),onClick:a}),r.a.createElement(_.Menu.Item,{text:"Save As...",label:b(oe.SAVE_DOCUMENT_AS),onClick:i,disabled:!S}),r.a.createElement(_.Menu.Divider,null),r.a.createElement(_.Menu.Item,{text:"Run",onClick:function(){N.emit("run-project",D.getState().tabs.active.path)},disabled:!S}),r.a.createElement(_.Menu.Item,{text:"Build",onClick:function(){N.emit("build-project",D.getState().tabs.active.path)},disabled:!S}),r.a.createElement(_.Menu.Divider,null),r.a.createElement(_.Menu.Item,{text:"Preferences...",onClick:function(){return N.emit("show-preferences")}}),r.a.createElement(_.Menu.Divider,null),r.a.createElement(_.Menu.Item,{text:"Exit",label:b(oe.EXIT_APP),onClick:function(){return N.emit("close-app")},disabled:!S})),target:r.a.createElement(_.Button,{minimal:!0,small:!0,text:"File"})}),r.a.createElement(_.Popover,{minimal:!0,position:_.Position.BOTTOM_LEFT,content:r.a.createElement(_.Menu,null,r.a.createElement(_.Menu.Item,{text:"Undo",onClick:function(){return N.emit("wip")}}),r.a.createElement(_.Menu.Item,{text:"Redo",onClick:function(){return N.emit("wip")}}),r.a.createElement(_.Menu.Divider,null),r.a.createElement(_.Menu.Item,{text:"Find...",onClick:function(){return N.emit("wip")}}),r.a.createElement(_.Menu.Item,{text:"Replace...",onClick:function(){return N.emit("wip")}}),r.a.createElement(_.Menu.Divider,null),r.a.createElement(_.Menu.Item,{text:"Insert Passage",onClick:function(){return N.emit("insert-passage")}}),r.a.createElement(_.Menu.Item,{text:"Remove Passage",onClick:function(){return N.emit("remove-passage")}})),target:r.a.createElement(_.Button,{minimal:!0,small:!0,text:"Edit"})}),r.a.createElement(_.Popover,{minimal:!0,position:_.Position.BOTTOM_LEFT,content:r.a.createElement(_.Menu,null,r.a.createElement(_.Menu.Item,{text:"Toggle Sidebar",onClick:function(){return N.emit("wip")}})),target:r.a.createElement(_.Button,{minimal:!0,small:!0,text:"View"})}),r.a.createElement(_.Popover,{minimal:!0,position:_.Position.BOTTOM_LEFT,content:r.a.createElement(_.Menu,null,r.a.createElement(_.Menu.Item,{text:"About",onClick:function(){return N.emit("show-about")}})),target:r.a.createElement(_.Button,{minimal:!0,small:!0,text:"Help"})}),r.a.createElement(ie,{keyMap:oe,handlers:e}))}function ce(){var e=Object(a.useState)({isOpen:!1}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=R(D,"app.version");return B("show-about",(function(){return i({isOpen:!0})})),r.a.createElement(_.Dialog,Object.assign({title:"HyperSigil Editor",className:_.Classes.DARK,onClose:function(){i({isOpen:!1})}},n),r.a.createElement("div",{className:"".concat(_.Classes.DIALOG_BODY," ").concat(_.Classes.RUNNING_TEXT)},"A text editor for the HyperSigil game engine, for creating HTML text-based games using JavaScript and the HyperSigil Template Engine.",r.a.createElement("h4",null,"Details"),r.a.createElement("p",null,"Version: ",o),r.a.createElement("p",null,"Copyright (C) Robert Planas - 2020")))}function le(e){return r.a.createElement("h4",{style:{margin:"0px 0px 16px 0px"}},e.children)}function ue(){var e=Object(a.useState)({isOpen:!1}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=R(P);function s(e,t){P.dispatch({type:"SET",key:e,value:t})}return B("show-preferences",(function(){return i({isOpen:!0})})),r.a.createElement(_.Drawer,Object.assign({title:"Preferences",className:_.Classes.DARK,onClose:function(){i({isOpen:!1})},size:"66%",style:{minWidth:"256px",maxWidth:"600px"}},n),r.a.createElement("div",{className:"".concat(_.Classes.DIALOG_BODY," ").concat(_.Classes.RUNNING_TEXT)},r.a.createElement(le,null,"Editor"),r.a.createElement(_.FormGroup,{label:"Font-family and size",labelFor:"text-input"},r.a.createElement(_.ControlGroup,{fill:!0,vertical:!1},r.a.createElement(_.HTMLSelect,{value:o.editor.fontFamily,onChange:function(e){return s("editor.fontFamily",e.currentTarget.value)}},r.a.createElement("option",null,"Georgia, serif"),r.a.createElement("option",null,'"Palatino Linotype", "Book Antiqua", Palatino, serif'),r.a.createElement("option",null,'"Times New Roman", Times, serif'),r.a.createElement("option",null,"Arial, Helvetica, sans-serif"),r.a.createElement("option",null,'"Arial Black", Gadget, sans-serif'),r.a.createElement("option",null,'"Comic Sans MS", cursive, sans-serif'),r.a.createElement("option",null,"Impact, Charcoal, sans-serif"),r.a.createElement("option",null,'"Lucida Sans Unicode", "Lucida Grande", sans-serif'),r.a.createElement("option",null,"Tahoma, Geneva, sans-serif"),r.a.createElement("option",null,'"Trebuchet MS", Helvetica, sans-serif'),r.a.createElement("option",null,"Verdana, Geneva, sans-serif"),r.a.createElement("option",null,'"Courier New", Courier, monospace'),r.a.createElement("option",null,'"Lucida Console", Monaco, monospace')),r.a.createElement(_.NumericInput,{fill:!0,min:8,max:128,minorStepSize:null,value:o.editor.fontSize,onValueChange:function(e){return s("editor.fontSize",e)}}))),r.a.createElement(le,null,"Commands"),r.a.createElement(_.FormGroup,{inline:!0,contentClassName:"full-width",label:"Run"},r.a.createElement(_.InputGroup,{fill:!0,placeholder:"npm run start",value:o.commands.run,onChange:function(e){return s("commands.run",e.target.value)},disabled:!S})),r.a.createElement(_.FormGroup,{inline:!0,contentClassName:"full-width",label:"Build"},r.a.createElement(_.InputGroup,{fill:!0,placeholder:"npm run build",value:o.commands.build,onChange:function(e){return s("commands.build",e.target.value)},disabled:!S})),r.a.createElement(le,null,"Miscellaneous"),r.a.createElement(_.Switch,{checked:o.app.saveSession,onChange:function(e){s("app.saveSession",e.target.checked),D.localStorageKey=e.target.checked?"session":""}},"Restore session on startup"),r.a.createElement(_.Button,{fill:!0,onClick:function(){return P.dispatch({type:"CLEAR"})}},"Restore Defaults")))}function de(){var e=Object(a.useState)({isOpen:!1}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(void 0),s=Object(c.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(void 0),f=Object(c.a)(d,2),m=f[0],h=f[1];function p(){u(void 0),h(void 0),i({isOpen:!1})}return B("show-new-project",(function(){return i({isOpen:!0})})),B("open-folder-dialog-reply",(function(e,t){"newProject"===e&&"string"===typeof t&&h(t)})),r.a.createElement(_.Dialog,Object.assign({title:"New Project",className:_.Classes.DARK,onClose:p},n),r.a.createElement("div",{className:_.Classes.DIALOG_BODY},r.a.createElement(_.FormGroup,{label:"Project Name",labelFor:"text-input",labelInfo:"(required)"},r.a.createElement(_.InputGroup,{id:"text-input",placeholder:"My Amazing Game",onChange:function(e){return u(e.target.value)}})),r.a.createElement(_.FormGroup,{helperText:"Final destination, files will be placed here, no subfolder will be created",label:"Directory",labelFor:"file-input",labelInfo:"(required)"},r.a.createElement(_.FileInput,{fill:!0,id:"file-input",text:void 0===m?"Choose file...":m,hasSelection:void 0!==m,inputProps:{onClick:function(e){e.preventDefault(),N.emit("open-folder-dialog","newProject")}}}))),r.a.createElement("div",{className:_.Classes.DIALOG_FOOTER},r.a.createElement("div",{className:_.Classes.DIALOG_FOOTER_ACTIONS},r.a.createElement(_.Button,{intent:_.Intent.NONE,onClick:p},"Close"),r.a.createElement(_.Button,{intent:_.Intent.PRIMARY,onClick:function(){void 0!==l&&void 0!==m?(N.emit("new-project",l,m),p()):N.emit("warning","Name and path are required")}},"Create"))))}function fe(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)({path:void 0,text:void 0}),s=Object(c.a)(o,2),l=s[0],u=s[1];function d(){i(!1),u({path:void 0,text:void 0})}function f(){var e=D.getState().tabs.passive.findIndex((function(e){return e.path===l.path}));!l.path||e>=0?N.emit("warning","The name is empty or already being used by another file in the same path"):(D.dispatch({type:"CONTENT_TOGGLE_MODIFIED",modified:!1}),D.dispatch({type:"ADD_TAB",path:l.path,text:l.text}),d())}return B("show-rename",(function(e){i(!0),u({path:void 0,text:e})})),r.a.createElement(_.Dialog,{title:"Rename file",className:_.Classes.DARK,onClose:d,isOpen:n},r.a.createElement("div",{className:_.Classes.DIALOG_BODY},r.a.createElement(_.FormGroup,{label:"New name",labelFor:"text-input"},r.a.createElement(_.InputGroup,{id:"text-input",placeholder:"Untitled",onChange:function(e){u({path:e.target.value,text:l.text})},inputRef:function(e){e&&(e.onkeydown=function(e){"Enter"===e.key&&f()})}}))),r.a.createElement("div",{className:_.Classes.DIALOG_FOOTER},r.a.createElement("div",{className:_.Classes.DIALOG_FOOTER_ACTIONS},r.a.createElement(_.Button,{intent:_.Intent.NONE,onClick:d},"Close"),r.a.createElement(_.Button,{intent:_.Intent.PRIMARY,onClick:f},"Rename"))))}function me(){return r.a.createElement("div",null,r.a.createElement(_.Navbar,{className:"bp3-dark smallnav",style:{position:"stiky",overflow:"hidden"}},r.a.createElement(_.Navbar.Group,{className:"smallnav",align:_.Alignment.LEFT},r.a.createElement(se,null),r.a.createElement("div",{className:"win-draggable"}),r.a.createElement(_.ButtonGroup,null,r.a.createElement(ne,null),r.a.createElement("div",{className:"win-draggable",style:{width:"20px"}}),S&&r.a.createElement(_.Button,{minimal:!0,small:!0,icon:"cross",intent:_.Intent.NONE,onClick:function(){return N.emit("close-app")}})))),r.a.createElement(ce,null),r.a.createElement(de,null),r.a.createElement(ue,null),r.a.createElement(fe,null))}n(270);function he(){var e=function(e){var t=e.name,n=e.action,a=e.active;return r.a.createElement("li",null,a?r.a.createElement("a",{onClick:n},t):r.a.createElement("a",{className:"link-disabled"},t))},t=function(t){return r.a.createElement("ul",null,r.a.createElement(e,{name:"RESTART",action:function(){return document.engine.restart()},active:!0}),r.a.createElement(e,{name:"<< PREV",action:function(){return document.engine.undo()},active:document.engine.canUndo}),r.a.createElement(e,{name:"NEXT >>",action:function(){return document.engine.redo()},active:document.engine.canRedo}))};return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(t,null)))}function pe(){var e,t=Object(a.useState)(""),n=Object(c.a)(t,2),i=n[0],o=n[1],s=R(D,"tabs.passive"),u={},d=Object(x.a)(s);try{for(d.s();!(e=d.n()).done;){var f=e.value;u[f.path]=f.text}}catch(m){d.e(m)}finally{d.f()}return Object(a.useMemo)((function(){document.engine=new G.a.Engine((function(e){return o(e)}),u,{initialPassage:"main",autoSave:!1,static:{}}),document.engine.onPassageEnter=function(e){var t=document.engine.env.static.getState();document.engine.env.local.push(Object(l.a)(Object(l.a)(Object(l.a)({},t.HyperSigil.Components),t.HyperSigil.Standard),t.HyperSigil.Documentation))},document.engine.init()}),[s]),r.a.createElement("div",null,r.a.createElement(he,null),r.a.createElement("div",{className:"passage fadein",dangerouslySetInnerHTML:{__html:i}}))}document.getElementsByTagName("body")[0].lang="en";var ve=navigator.userAgent.toLowerCase();var ge=function(){return ve.indexOf(" electron/")>-1?r.a.createElement("div",null,r.a.createElement(me,null),r.a.createElement(Q,null)):r.a.createElement("div",null,r.a.createElement(s.a,{style:{display:"flex"}},r.a.createElement("div",null,r.a.createElement(me,null),r.a.createElement(Q,null)),r.a.createElement("div",null,r.a.createElement(pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,n){"use strict";var a=n(119),r=n(121),i=n(79),o=n(50),s=n(56),c=n(36),l=n(37),u=n(122),d=u.Parser,f=u.HyperSigil,m=n(226),h=n(81),p=n(126),v=n(227),g=n(40),y=n(240),b=n(241),E=n(80),x=n(242),_=n(243),k=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r in c(this,e),this.render=t,this.env=new v(s(s({},m),a.static)),this.options=a,this._currentPassageHTML="",this._isPassageLoading=!1,this._evaluationDepth=0,this.DOMCallbacks={},this.parser=new d,this.passages={},n){var i,l=this.parser.parseFile(r,n[r]),u=o(l);try{for(u.s();!(i=u.n()).done;){var f=i.value;this.passages[f.name]=f}}catch(h){u.e(h)}finally{u.f()}}this.onPassageEnter=function(e){},this.onPassageDone=function(e){},this.onPassageLeave=function(e){}}return l(e,[{key:"init",value:function(){for(var e={},t=0,n=Object.entries(this.passages);t<n.length;t++){var a=i(n[t],2),o=a[0],c=a[1].yaml;e=g.merge(e,c.global),e=g.merge(e,{passage:{name:"NOPSG"},game:{passages:r({},o,s(s({},c.passage),{},{name:o}))}})}this.options.autoSave&&window.localStorage.currentGame?(this.env.load(JSON.parse(window.localStorage.currentGame)),this.goToPassage(this.env.global.getState().passage.name,!0)):(this.env.load(e),this.goToPassage(this.initialPassageName))}},{key:"evaluateNode",value:function(e){var t=this,n={String:function(){return g.escape(e.value)},Name:function(){return e.value},Number:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return Number(e.value)})),Block:function(){return e.getChildByName("All").value},Text:function(){t._evaluationDepth++;var n,a=[],r=o(e.value);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{a.push(t.evaluateNode(i))}catch(s){if(!(t._evaluationDepth<=1))throw t._evaluationDepth--,s;console.error("".concat(s.name," in Call node at line ").concat(i.tree.start.line," column ").concat(i.tree.start.column,": ").concat(s.message)),a.push(t.env.static.getState().HyperSigil.Components.error(s.message))}}}catch(s){r.e(s)}finally{r.f()}return t._evaluationDepth--,h.trimByBackslash(y.render(a.join(""))).replace(/(?:\r\n|\r|\n)/g,"<br>")},Call:function(){var n=t.evaluateNode(e.getChildByName("CallName")),r=t.evaluateNode(e.getChildByName("CallList"));return"function"===typeof n?n.apply(void 0,a(r)):n},CallName:function(){var n=[e.getChildByName("Name")].concat(e.getChildByName("SubnameList").value).map((function(e){return t.evaluateNode(e)}));return e.ref?n:t.env.get(n)},Index:function(){return t.evaluateNode(e.getChildByName("Text"))},CallList:function(){return e.value.map((function(e){return t.evaluateNode(e)}))},Operand:function(){return t.evaluateNode(e.value[0])},Operation:function(){return{operator:e.value[0].value,operand:t.evaluateNode(e.value[1])}},OperationList:function(){return e.value.map((function(e){return t.evaluateNode(e)}))},Expression:function(){var n=t.evaluateNode(e.value[0]),a=t.evaluateNode(e.value[1]).map((function(e){var t={op:e.operator,a:n,b:e.operand};return n=t.b,t}));return a.length?a:[{op:null,a:n,b:null}]},SetExpression:function(){var n=e.value[1];n.ref=!0;var a=t.evaluateNode(e.value[3]),r=e.value[2].value,i=document.engine.evaluateNode(n),o="Block"===e.value[3].value[0].name?t.evaluate(a).toString():a;"="===r?t.env.set(i,o):"+="===r?t.env.set(i,Number(t.env.get(i))+o):"-="===r&&t.env.set(i,Number(t.env.get(i))-o)}};if(e.name in n)return n[e.name]();throw SyntaxError("On node ".concat(e.name))}},{key:"evaluate",value:function(e,t){if(void 0===e)throw new Error("Evaluate called with undefined");var n=this.parser.parse(e,t);return this.evaluateNode(n)}},{key:"goToPassage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.passageIsLoading)throw Error("A passage load can not be triggered when another passage is already loading");try{if(e=this.resolvePassageName(e),this.onPassageLeave(e))return;this._isPassageLoading=!0,this._evaluationDepth=0,this._DOMCallbacks={};var n=this.passages[e];this.env.next(e,t),this.options.autoSave&&window.localStorage.setItem("currentGame",JSON.stringify(this.env.global.getState())),this.onPassageEnter(e),this.env.local.push(),this.currentPassageHTML=this.evaluate(n.text),this.env.local.pop(),this._isPassageLoading=!1,this.onPassageDone(e)}catch(a){throw this.currentPassageHTML='<div style="margin: 10px 0px;padding:12px;color: #D8000C;background-color: #FFD2D2;">'.concat(a.name," when loading passage ").concat(e,": ").concat(a.message,"</div>"),this._isPassageLoading=!1,a}}},{key:"undo",value:function(){this.env.undo(),this.goToPassage(this.currentPassageName)}},{key:"redo",value:function(){this.env.redo(),this.goToPassage(this.currentPassageName)}},{key:"restart",value:function(){window.localStorage.removeItem("currentGame"),this.env.restart(),this.init()}},{key:"getPathByCallName",value:function(e){var t="string"===typeof e?this.parser.parse(e,f.CallName):e;return t.ref=!0,document.engine.evaluateNode(t)}},{key:"resolvePassageName",value:function(e){if(""===e||"."===e)return this.currentPassageName;if(e.startsWith(".")){var t=this.currentPassageName.split("."),n=e.slice(1).split(".");e=t.slice(0,n.length).concat(n).join(".")}if(e in this.passages)return e;if(e+".default"in this.passages)return e+".default";throw Error("Passage with name ".concat(e," not found"))}},{key:"addCallback",value:function(e){var t=h.uuidv4();return this.DOMCallbacks[t]=e,t}},{key:"currentPassageHTML",get:function(){return this._currentPassageHTML},set:function(e){this._currentPassageHTML=e,this.render(e)}},{key:"currentPassageName",get:function(){return this.env.global.getState().passage.name}},{key:"initialPassageName",get:function(){return this.options.initialPassage||"main"}},{key:"isPassageLoading",get:function(){return this._isPassageLoading}},{key:"canUndo",get:function(){return this.env.global._internal.getState().past.length>0}},{key:"canRedo",get:function(){return this.env.global._internal.getState().future.length>0}}]),e}();e.exports={Engine:k,GameObject:b,PassageComponent:x,MenuComponent:_,Environment:v,AST:E,YAML:p,Parser:d}},80:function(e,t,n){var a=n(119),r=n(56),i=n(50),o=n(36),s=n(37),c=n(40),l=function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;o(this,e),this.tree=n?t:e.validate(t)}return s(e,[{key:"traverse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=[];function r(o){if(!t([].concat(a),o)){if(!e.isLeaf(o)){a.push(0);var s,c=i(o.value);try{for(c.s();!(s=c.n()).done;){r(s.value),a.push(a.pop()+1)}}catch(l){c.e(l)}finally{c.f()}a.pop()}n([].concat(a),o)}}r(this.tree)}},{key:"flatten",value:function(){var t=[];return this.traverse((function(n,a){e.isLeaf(a)&&t.push(a)})),t}},{key:"getNodesByName",value:function(e){var t=[];return this.traverse((function(n,a){a.name===e&&t.push(a)})),t}},{key:"getSubASTsByName",value:function(t){return this.getNodesByName(t).map((function(t){return new e(t,!0)}))}},{key:"getChildByName",value:function(t){var n,a=i(this.tree.value);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.name===t)return new e(r,!0)}}catch(o){a.e(o)}finally{a.f()}throw new SyntaxError}},{key:"find",value:function(t){var n,a=this.tree,r=i(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("number"!==typeof o)throw new TypeError("Path contains non-numbers!");if(e.isLeaf(a))throw new Error("Path is too deep "+t);a=a.value[o]}}catch(s){r.e(s)}finally{r.f()}return a}},{key:"cut",value:function(e){var t=this.find(e),n=r({},t);return t.value=[],n}},{key:"replace",value:function(t,n){var a=t.slice(),r=a.pop(),i=this.find(a),o=i.value[r],s=new e(n).copy();return s.offset=o.start,i.value[r]=s.tree,o}},{key:"copy",value:function(){return this.tree=c.cloneDeep(this.tree),this}},{key:"toDot",value:function(){function e(e){return 0===e.length?"root":e.map((function(e){return a(e.toString()).map((function(e){return String.fromCharCode(97+Number(e))})).join("")})).join("I")}var t="",n="";return this.traverse((function(r,i){t+="    ".concat(e(r),' [label="').concat(i.name,'"]\n'),r.length&&(n+="    root -> "+a(r.keys()).map((function(e){return r.slice(0,e+1)})).map((function(t){return e(t)})).join(" -> ")+"\n")})),"strict digraph graphname {\n".concat(t,"\n\n").concat(n,"\n}")}},{key:"value",get:function(){return Array.isArray(this.tree.value)?this.tree.value.map((function(t){return new e(t,!0)})):this.tree.value}},{key:"name",get:function(){return this.tree.name}},{key:"offset",get:function(){return this.tree.start},set:function(t){if(!e.isIndex(t))throw new TypeError("Expected index object, got ".concat(t));var n=t.offset-this.offset.offset,a=t.line-this.offset.line,r=t.column-this.offset.column;this.traverse((function(e,t){var i={offset:t.start.offset+n,line:t.start.line+a,column:t.start.column+r},o={offset:t.end.offset+n,line:t.end.line+a,column:t.end.column+r};t.start=i,t.end=o}))}}],[{key:"validate",value:function(t){if(!e.isNode(t)){if(t.status)throw new TypeError("Not a valid AST Node (with status), make sure to check the status and do not include it!");throw new TypeError("Not a valid AST Node "+JSON.stringify(t,null,2))}if(!e.isLeaf(t)){if(!Array.isArray(t.value)){if("object"!==typeof t.value)throw new TypeError("Not a valid AST Node "+JSON.stringify(t,null,2));t.value=[t.value]}var n,a=i(t.value);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(Array.isArray(r))throw TypeError("Not a valid AST Node (Nested array found), on Token ".concat(t.name,". Make sure you're generating enough nodes"));e.validate(r)}}catch(o){a.e(o)}finally{a.f()}}return t}},{key:"isIndex",value:function(e){return"object"===typeof e&&(!("number"!==typeof e.offset||e.offset<0)&&(!("number"!==typeof e.line||e.line<1)&&(!("number"!==typeof e.column||e.column<1)&&3===Object.keys(e).length)))}},{key:"copyIndex",value:function(t){if(!e.isIndex(t))throw new TypeError;return{offset:t.offset,line:t.line,column:t.column}}},{key:"isNode",value:function(t){return"object"===typeof t&&(void 0!==t.name&&(void 0!==t.value&&(!(void 0===t.start||!e.isIndex(t.start))&&!(void 0===t.end||!e.isIndex(t.end)))))}},{key:"isLeaf",value:function(t){return!!e.isNode(t)&&"object"!==typeof t.value}}]),e}();e.exports=l},81:function(e,t,n){var a=n(56),r=n(79),i=n(50),o=n(125);e.exports=a(a({},o),{},{bind:function(e){var t,n=i(function(e){var t=new Set;do{var n,a=i(Reflect.ownKeys(e));try{for(a.s();!(n=a.n()).done;){var r=n.value;t.add([e,r])}}catch(o){a.e(o)}finally{a.f()}}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t}(e.constructor.prototype));try{for(n.s();!(t=n.n()).done;){var a=r(t.value,2),o=a[0],s=a[1];if("constructor"!==s){var c=Reflect.getOwnPropertyDescriptor(o,s);c&&"function"===typeof c.value&&(e[s]=e[s].bind(e))}}}catch(l){n.e(l)}finally{n.f()}},uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}})}},[[187,1,2]]]);
//# sourceMappingURL=main.d7f3c526.chunk.js.map